<html>
    <head>
        <link rel="stylesheet" href="css/style.css">
    <body class="event-body">
    <div class="event-container">
        <div class="eventform-header">
            <h1 >Create New Event</h1>
            <p>Fill in the details to create your event</p>
        </div>

        <div class="eventform-container">
            <div id="success-message" class="success-message">
                Event created successfully! ðŸŽ‰
            </div>

            <div id="error-message" class="error-message">
                Please fill in all required fields correctly.
            </div>

            <form id="event-form" action="create_event.php" method="POST">
                <div class="form-row">
                    <div class="form-group">
                        <label for="organizer_name">Organizer Name <span class="required">*</span></label>
                        <input type="text" id="organizer_name" name="organizer_name" required 
                               placeholder="Enter organizer's full name">
                        <div class="form-help">Full name of the person organizing this event</div>
                    </div>

                    <div class="form-group">
                        <label for="organizer_email">Organizer Email <span class="required">*</span></label>
                        <input type="email" id="organizer_email" name="organizer_email" required 
                               placeholder="organizer@example.com">
                        <div class="form-help">Contact email for the organizer</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="organizer_phone">Organizer Phone</label>
                        <input type="tel" id="organizer_phone" name="organizer_phone" 
                               placeholder="+254 700 000 000">
                        <div class="form-help">Contact phone number (optional)</div>
                    </div>

                    <div class="form-group">
                        <label for="venue_id">Venue</label>
                        <select id="venue_id" name="venue_id">
                            <option value="">Select Venue (Optional)</option>
                            <!-- This will be populated dynamically -->
                            <option value="1">Nairobi Concert Hall - 123 Main Street, Nairobi (Capacity: 5000)</option>
                        </select>
                        <div class="form-help">Choose a venue or leave blank for virtual events</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="title">Event Title <span class="required">*</span></label>
                    <input type="text" id="title" name="title" maxlength="200" required 
                           placeholder="Enter an engaging event title">
                    <div class="form-help">Maximum 200 characters</div>
                </div>

                <div class="form-group">
                    <label for="description">Event Description</label>
                    <textarea id="description" name="description" 
                              placeholder="Describe your event in detail. What can attendees expect?"></textarea>
                    <div class="form-help">Provide detailed information about your event</div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="start_datetime">Start Date & Time <span class="required">*</span></label>
                        <input type="datetime-local" id="start_datetime" name="start_datetime" required>
                    </div>

                    <div class="form-group">
                        <label for="end_datetime">End Date & Time</label>
                        <input type="datetime-local" id="end_datetime" name="end_datetime">
                        <div class="form-help">Leave blank if duration is unknown</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="categories">Event Categories</label>
                    <div class="checkbox-group" id="categories">
                        <!-- These would be populated from the database -->
                        <label class="checkbox-item">
                            <input type="checkbox" name="categories[]" value="1">
                            <span class="checkmark"></span>
                            Music
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="categories[]" value="2">
                            <span class="checkmark"></span>
                            Business & Networking
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="categories[]" value="3">
                            <span class="checkmark"></span>
                            Technology & Innovation
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="categories[]" value="4">
                            <span class="checkmark"></span>
                            Arts & Culture
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="categories[]" value="5">
                            <span class="checkmark"></span>
                            Sports & Fitness
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="categories[]" value="6">
                            <span class="checkmark"></span>
                            Education & Learning
                        </label>
                    </div>
                    <div class="form-help">Select one or more categories that best describe your event</div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="status">Event Status <span class="required">*</span></label>
                        <select id="status" name="status" required>
                            <option value="draft">Draft <span class="status-badge status-draft">Draft</span></option>
                            <option value="published">Published <span class="status-badge status-published">Live</span></option>
                            <option value="cancelled">Cancelled <span class="status-badge status-cancelled">Cancelled</span></option>
                        </select>
                        <div class="form-help">Draft events are not visible to the public</div>
                    </div>

                    <div class="form-group">
                        <label for="capacity">Event Capacity</label>
                        <input type="number" id="capacity" name="capacity" min="1" max="100000" 
                               placeholder="Maximum number of attendees">
                        <div class="form-help">Leave blank for unlimited capacity</div>
                    </div>
                </div>

                <button type="submit" class="btn-primary">
                    Create Event
                </button>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('event-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');
            
            // Hide previous messages
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            
            // Basic validation
            const organizer_name = formData.get('organizer_name').trim();
            const organizer_email = formData.get('organizer_email').trim();
            const title = formData.get('title').trim();
            const start_datetime = formData.get('start_datetime');
            const status = formData.get('status');
            
            if (!organizer_name || !organizer_email || !title || !start_datetime || !status) {
                errorMessage.style.display = 'block';
                errorMessage.scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(organizer_email)) {
                errorMessage.textContent = 'Please enter a valid email address.';
                errorMessage.style.display = 'block';
                errorMessage.scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // Validate end time is after start time
            const startTime = new Date(start_datetime);
            const endTime = formData.get('end_datetime') ? new Date(formData.get('end_datetime')) : null;
            
            if (endTime && endTime <= startTime) {
                errorMessage.textContent = 'End date must be after start date.';
                errorMessage.style.display = 'block';
                errorMessage.scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // Here you would typically send the data to your PHP script
            // For demo purposes, we'll show a success message
            console.log('Form Data:', Object.fromEntries(formData));
            
            // Simulate successful submission
            successMessage.style.display = 'block';
            successMessage.scrollIntoView({ behavior: 'smooth' });
            
            // Reset form after successful submission
            setTimeout(() => {
                this.reset();
                successMessage.style.display = 'none';
            }, 3000);
        });
        
        // Set minimum datetime to current time
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const offset = now.getTimezoneOffset() * 60000;
            const localTime = new Date(now.getTime() - offset).toISOString().slice(0, 16);
            
            document.getElementById('start_datetime').min = localTime;
            document.getElementById('end_datetime').min = localTime;
        });
        
        // Update end datetime minimum when start datetime changes
        document.getElementById('start_datetime').addEventListener('change', function() {
            const startTime = this.value;
            const endDatetime = document.getElementById('end_datetime');
            endDatetime.min = startTime;
            
            // Clear end datetime if it's before the new start time
            if (endDatetime.value && endDatetime.value <= startTime) {
                endDatetime.value = '';
            }
        });
    </script>
</body>
</html>